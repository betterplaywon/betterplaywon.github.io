---
title: "Post: 위크맵"
categories:
  - Post Formats
tags:
  - JS
  - CODING
  - BASIC
---

<br>

- 알고있어야 할 점

기본적으로 맵과 셋, 위크맵과 위크셋은 가바지 콜렉터와 연관이 있다.

맵과 셋을 사용할 땐  해당 구성 요소들 참조하는 것이 아무 것도 없어도 해당 요소가 가비지 콜렉터의 대상이 되지 않는다.

하지만 위크맵과 위크셋을 사용하면 해당 구성 요소를 참조하는 것이 가비지 컬렉터의 대상이 된다.

---

<br>
<br>

# 위크맵

<br>

> key가 반드시 객체여야 한다는 점이 기존 맵과 차이점이다.

```js
// Map일 때
let headphone = {name : "Bose"};

let map = new Map();

map.set(headphone, 'oo');

headphone = null; // map의 요소인 headphone을 null로 처리한다.

for(let obj of map.keys()) {
console.log(obj); // 하지만 null 처리가 아닌 {name : "Bose"}이 출력된다. 가비지 콜렉터에 수거되지 않았다는 뜻.
}

console.log(map.size); // 1


// weakMap일 때

let earphone = {name:"Buzz Live"};

let weakMap = new weakMap();

// ✅ weakMap.set('TEXT', "OO") => 위크맵은 문자열을 키로 사용할 수 없다.
weakMap.set(earphone, 'oo'); // 

earphone = null; // weakMap의 요소인 earphone을 null로 처리한다.

console.log(weakMap.has(earphone)); // false가 출력된다. earphone 객체가 가비지 콜렉터에 포함되어진 것이다.
```

<br>

`객체`는 오로지 `위크맵의 키로만 사용`된다.

또한 `참조를 덮어쓰게 되면` 이 객체는 `위크맵과 메모리에서 자동으로 삭제`된다.

이게 무슨 말인가 하면, `위크맵`은 `반복 작업`과 keys(), values(), entries() 메서드를 `지원하지 않는다`는 점이다.

따라서 위크맵에선 `키나 값 전체를 얻는 게 불가능`하다.

<br>

## 위크맵을 사용하면 좋은 경우

<br>

외부 코드와
